#!/bin/bash

merge_folders() {
    for source_folder in "$@"; do
        for filename in "$source_folder"/*; do
            if [ -e "$filename" ]; then
                base=$(basename -- "$filename")
                extension="${base##*.}"
                filename_noext="${base%.*}"
                unique_filename="${filename_noext}_${source_folder##*/}.${extension}"
                destination_path="$2/$unique_filename"
                mv "$filename" "$destination_path"
                echo "Moved $base from $source_folder to $destination_path"
            fi
        done
    done
}

# Replace these paths with your actual folder paths
source_folders=("/path/to/source/folder1" "/path/to/source/folder2" "/path/to/source/folder3")
destination_folder="/path/to/destination/folder"

# Create the destination folder if it doesn't exist
mkdir -p "$destination_folder"

# Merge files from all source folders to the destination folder
merge_folders "${source_folders[@]}" "$destination_folder"
